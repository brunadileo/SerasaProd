$(document).ready(function(){function e(){$(".preview").show(),$(".dimensionsViewer").show(),i.css({display:"block"}),i.cropper({data:{x:0,y:0,width:i.width(),height:i.height()},modal:!0,rotatable:!1,zoomable:!1,done:function(e){n=Math.floor(e.width),t=Math.floor(e.height),o.html(n),l.html(t)}})}var a,r,i,n,t,o,l,c=window.navigator.userAgent,d=!1;if(c.indexOf("MSIE 8")>0&&(d=!0),c.indexOf("MSIE 9")>0&&(d=!0),c.indexOf("Safari")>0&&c.indexOf("5.1")>0&&c.indexOf("Chrome")<0&&(d=!0),$(".preview").hide(),d)$(".preview").length>0&&$(".preview").remove();else{a=$(".newImage"),r=$(".newImg"),r.attr("type","file"),i=$("#imageToCrop");var s=!1;n="",t="",o=$(".imageFinalWidthViewer"),l=$(".imageFinalHeightViewer"),i.length>0&&void 0!==i.attr("src")&&(s=!0,i.ready(function(){e()})),d||r.change(function(){var a=$(this)[0].files[0],r=new FileReader;r.onloadend=function(){i.attr("src",r.result)},a?r.readAsDataURL(a):i.attr("src",""),i.load(function(){s?$(i).cropper("destroy"):s=!0,e()})})}$(".preview").click(function(){var e=window.open("","{!$Label.Preview}","toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=yes, resizable=yes, width="+(n+20)+", height="+(t+20));e.document.body.innerHTML='<img src="'+i.cropper("getDataURL")+'"/>'}),$(".save").click(function(){if(a=$(".newImage"),r=$(".newImg"),""===r.val()&&""===a.val()&&void 0===i.attr("src"))return alert(config.errorUpload),!1;var e="";if(""!==r.val()&&""===a.val()){switch(e=r.val().match(/\.([^.]+)$/)[1]){case"jpg":case"jpeg":e="jpeg";break;case"png":case"gif":break;default:return alert(config.errorType),!1}e="image/"+e}else e=config.contentType;return d||(a.val(i.cropper("getDataURL",e,.8)),"data:,"!==a.val())?void(""===a.val()?a.val(""):r.val("")):(alert(config.errorImageCeroDimensions),!1)}),$(".cancel").click(function(){r.val(""),a.val("")})});
//# sourceMappingURL=photoUpload.js.map
